<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wereld Wonder - Systeemoverzicht</title>
    <link rel="icon" href="/images/logo.png" type="image/x-icon">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="./modules/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .pages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .page-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border-left: 4px solid;
        }

        .page-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .page-card.customer {
            border-left-color: #3498db;
        }

        .page-card.staff {
            border-left-color: #2ecc71;
        }

        .page-card.management {
            border-left-color: #e74c3c;
        }

        .page-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .page-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            color: white;
            font-size: 1.2rem;
        }

        .customer .page-icon {
            background: #3498db;
        }

        .staff .page-icon {
            background: #2ecc71;
        }

        .management .page-icon {
            background: #e74c3c;
        }

        .page-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 3px;
        }

        .page-url {
            font-size: 0.85rem;
            color: #95a5a6;
            font-family: monospace;
        }

        .features-list {
            list-style: none;
            margin-top: 15px;
        }

        .features-list li {
            padding: 6px 0;
            color: #555;
            font-size: 0.95rem;
        }

        .features-list li::before {
            content: '•';
            color: inherit;
            margin-right: 8px;
        }

        .customer .features-list li::before {
            color: #3498db;
        }

        .staff .features-list li::before {
            color: #2ecc71;
        }

        .management .features-list li::before {
            color: #e74c3c;
        }

        .access-link {
            display: inline-block;
            margin-top: 15px;
            padding: 8px 16px;
            background: #f8f9fa;
            color: #495057;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .access-link:hover {
            background: #e9ecef;
            transform: translateX(3px);
        }

        .qr-generator-btn {
            display: inline-block;
            margin-top: 8px;
            margin-left: 10px;
            padding: 8px 16px;
            background: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .qr-generator-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }

        .qr-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .qr-modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 400px;
            text-align: center;
        }

        .qr-modal h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .qr-code-container {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            display: inline-block;
        }

        .close-modal {
            position: absolute;
            right: 15px;
            top: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6c757d;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #dc3545;
        }

        .qr-url-info {
            margin-top: 15px;
            padding: 10px;
            background: #e9ecef;
            border-radius: 6px;
            font-size: 0.85rem;
            color: #495057;
            word-break: break-all;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #7f8c8d;
        }

        @media (max-width: 768px) {
            .pages-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-utensils"></i> Wereld Wonder Systeem</h1>
            <p>Overzicht van alle beschikbare functionaliteiten</p>
        </div>

        <div class="pages-grid">
            <!-- Klantenpagina -->
            <div class="page-card customer">
                <div class="page-header">
                    <div class="page-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div>
                        <div class="page-title">Klantenpagina</div>
                        <div class="page-url">/public/index.html</div>
                    </div>
                </div>
                <ul class="features-list">
                    <li>Menu bekijken en bestellen</li>
                    <li>QR-code scanning voor tafel toegang</li>
                    <li>Real-time bestellingen plaatsen</li>
                    <li>Meerdere talen ondersteuning</li>
                </ul>
                <a href="../index.html?rest=WereldWonder&tafel=1" class="access-link" target="_blank">
                    <i class="fas fa-external-link-alt"></i> Openen voorbeeld Tafel-1
                </a>
            </div>

            <!-- Personeelspagina -->
            <div class="page-card staff">
                <div class="page-header">
                    <div class="page-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div>
                        <div class="page-title">Personeelspagina</div>
                        <div class="page-url">/public/personeel/index.html</div>
                    </div>
                </div>
                <ul class="features-list">
                    <li>Tafel selecteren en bestellingen beheren</li>
                    <li>Controle paneel voor tafel instellingen</li>
                    <li>Personen aantal aanpassen</li>
                    <li>All-in pakket beheer</li>
                    <li>Bestelling geschiedenis bekijken</li>
                </ul>
                <div style="background: #e8f5e9; padding: 12px; border-radius: 6px; margin-top: 12px; font-size: 0.9rem;">
                    <strong><i class="fas fa-lock"></i> Email Verificatie:</strong>
                    <p style="margin: 8px 0 0 0; color: #2e7d32;">
                        Medewerkers moeten inloggen met hun geregistreerde email. 
                        Session blijft <strong>30 dagen geldig</strong>.
                    </p>
                </div>
                <a href="https://ww-personeel.cislink.nl/personeel/?rest=WereldWonder" class="access-link" target="_blank">
                    <i class="fas fa-external-link-alt"></i> Openen Personeelspagina
                </a>
                <button class="qr-generator-btn" onclick="generateStaffQR()">
                    <i class="fas fa-qrcode"></i> Genereer QR Code
                </button>
                <button class="qr-generator-btn" onclick="showEmailInstructions()" style="background: #17a2b8; margin-left: 10px;">
                    <i class="fas fa-info-circle"></i> Email Instructies
                </button>
            </div>

            <!-- Beheerpagina -->
            <div class="page-card management">
                <div class="page-header">
                    <div class="page-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div>
                        <div class="page-title">Beheerpagina</div>
                        <div class="page-url">/public/beheer/index.html</div>
                    </div>
                </div>
                <ul class="features-list">
                    <li>Restaurant configuratie instellen</li>
                    <li>Menu beheer en prijzen aanpassen</li>
                    <li>QR-codes genereren voor tafels</li>
                    <li>Systeem instellingen beheren</li>
                    <li>Data export en import functionaliteit</li>
                </ul>
                <a href="https://ww-personeel.cislink.nl/beheer/index.html" class="access-link" target="_blank">
                    <i class="fas fa-external-link-alt"></i> Openen Beheerpagina
                </a>
            </div>
        </div>

        <div class="footer">
            <p><i class="fas fa-info-circle"></i> Voor technische ondersteuning, neem contact op met het IT-team</p>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div id="qrModal" class="qr-modal">
        <div class="qr-modal-content">
            <span class="close-modal" onclick="closeQRModal()">&times;</span>
            <h3><i class="fas fa-qrcode"></i> Personeelspagina QR Code</h3>
            <div class="qr-code-container" id="qrCodeContainer">
                <!-- QR code will be generated here -->
            </div>
            <div class="qr-url-info" id="qrUrlInfo">
                <!-- URL will be displayed here -->
            </div>
            <p style="margin-top: 15px; font-size: 0.9rem; color: #6c757d;">
                Scan deze QR code om direct naar de personeelspagina te gaan
            </p>
        </div>
    </div>

    <!-- Email Instructions Modal -->
    <div id="emailModal" class="qr-modal">
        <div class="qr-modal-content" style="max-width: 650px; max-height: 85vh; overflow-y: auto;">
            <span class="close-modal" onclick="closeEmailModal()">&times;</span>
            <h3><i class="fas fa-envelope"></i> Personeel Email Verificatie</h3>
            
            <div style="text-align: left; padding: 20px 10px;">
                <!-- Voor Medewerkers -->
                <div style="background: #e8f5e9; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #2e7d32; margin-bottom: 12px;">
                        <i class="fas fa-users"></i> Voor Medewerkers
                    </h4>
                    
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #1976d2;">📧 Eerste Keer Inloggen:</strong>
                        <ol style="margin: 8px 0 0 20px; line-height: 1.8;">
                            <li>Geef uw email adres door aan de manager</li>
                            <li>Wacht tot de manager uw email heeft geactiveerd</li>
                            <li>Open de Personeel App en voer uw email in</li>
                            <li>Ontvang verificatiecode per email (geldig 10 min)</li>
                            <li>Voer de code in → ✅ Ingelogd!</li>
                        </ol>
                    </div>
                    
                    <div style="background: white; padding: 12px; border-radius: 6px; margin-top: 12px;">
                        <strong style="color: #f57c00;">⏰ Belangrijk:</strong>
                        <ul style="margin: 8px 0 0 20px; line-height: 1.8;">
                            <li>Uw login blijft <strong>30 dagen geldig</strong></li>
                            <li>U hoeft niet elke dag opnieuw in te loggen</li>
                            <li>Gebruik alleen uw geregistreerde email</li>
                            <li>Deel uw toegang niet met anderen</li>
                        </ul>
                    </div>
                </div>

                <!-- Voor Managers -->
                <div style="background: #fff3e0; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #e65100; margin-bottom: 12px;">
                        <i class="fas fa-user-shield"></i> Voor Managers
                    </h4>
                    
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #c62828;">🔧 Email Toevoegen via Cloudflare:</strong>
                        <ol style="margin: 8px 0 0 20px; line-height: 1.8;">
                            <li>Open Beheer Console → <strong>⚙️ Instellingen</strong></li>
                            <li>Scroll naar <strong>"Cloudflare Zero Trust Configuratie"</strong></li>
                            <li>Voer <strong>Cloudflare API Token</strong> in (van dash.cloudflare.com)</li>
                            <li>Voer <strong>Account ID</strong> in</li>
                            <li>Lijst medewerker emails op (één per regel):
                                <pre style="background: #f5f5f5; padding: 8px; border-radius: 4px; margin: 8px 0; font-size: 0.85rem;">medewerker1@restaurant.nl
medewerker2@restaurant.nl
manager@restaurant.nl</pre>
                            </li>
                            <li>Klik <strong>"Bijwerk Cloudflare Beleid"</strong></li>
                            <li>✅ Controleer met <strong>"Bekijk Huidig Beleid"</strong></li>
                        </ol>
                    </div>
                </div>

                <!-- Problemen Oplossen -->
                <div style="background: #ffebee; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #c62828; margin-bottom: 12px;">
                        <i class="fas fa-tools"></i> Problemen Oplossen
                    </h4>
                    
                    <div style="line-height: 1.8;">
                        <strong>❌ Geen toegang?</strong>
                        <ul style="margin: 5px 0 10px 20px;">
                            <li>Controleer of email geregistreerd is bij manager</li>
                            <li>Kijk in spam folder voor verificatiecode</li>
                            <li>Probeer opnieuw na 5 minuten</li>
                        </ul>
                        
                        <strong>📧 Code niet ontvangen?</strong>
                        <ul style="margin: 5px 0 10px 20px;">
                            <li>Wacht 2-3 minuten (email kan vertraagd zijn)</li>
                            <li>Check spam/junk folder</li>
                            <li>Vraag manager om email opnieuw toe te voegen</li>
                        </ul>
                        
                        <strong>⏱️ Sessie verlopen?</strong>
                        <ul style="margin: 5px 0 10px 20px;">
                            <li>Na 30 dagen moet u opnieuw inloggen</li>
                            <li>Volg dezelfde stappen als bij eerste login</li>
                        </ul>
                    </div>
                </div>

                <!-- Wat Kunt U Doen -->
                <div style="background: #e3f2fd; padding: 20px; border-radius: 8px;">
                    <h4 style="color: #1565c0; margin-bottom: 12px;">
                        <i class="fas fa-check-circle"></i> Wat Kunt U Doen?
                    </h4>
                    <ul style="margin: 8px 0 0 20px; line-height: 1.8;">
                        <li>✅ Bestellingen plaatsen voor gasten</li>
                        <li>✅ Menu bekijken en items selecteren</li>
                        <li>✅ Tafel PIN codes verifiëren</li>
                        <li>✅ Bestel geschiedenis bekijken</li>
                        <li>✅ Tafel status beheren</li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div style="text-align: center; margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 6px;">
                    <p style="margin: 0; color: #666;">
                        <i class="fas fa-question-circle"></i> 
                        <strong>Hulp nodig?</strong><br>
                        Neem contact op met uw manager of support@cislink.nl
                    </p>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 15px;">
                <button onclick="printInstructions()" style="padding: 10px 20px; background: #2196F3; color: white; border: none; border-radius: 6px; cursor: pointer; margin-right: 10px;">
                    <i class="fas fa-print"></i> Print Instructies
                </button>
                <button onclick="copyInstructions()" style="padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    <i class="fas fa-copy"></i> Kopieer Tekst
                </button>
            </div>
        </div>
    </div>
</body>

<script>
    // QR Code Generation Functions
    function generateStaffQR() {
        const staffUrl = 'https://ww-personeel.cislink.nl/personeel/?rest=WereldWonder';
        const modal = document.getElementById('qrModal');
        const qrContainer = document.getElementById('qrCodeContainer');
        const urlInfo = document.getElementById('qrUrlInfo');
        
        // Clear previous QR code
        qrContainer.innerHTML = '';
        
        // Create QR code
        try {
            const qrCode = new QRCode(qrContainer, {
                text: staffUrl,
                width: 256,
                height: 256,
                colorDark: "#3498db",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.M
            });
            
            // Display URL info
            urlInfo.innerHTML = `<strong>URL:</strong><br>${staffUrl}`;
            
            // Show modal
            modal.style.display = 'block';
            
        } catch (error) {
            console.error('QR Code generation error:', error);
            toast('Er is een fout opgetreden bij het genereren van de QR code.', 'error');
        }
    }
    
    function closeQRModal() {
        const modal = document.getElementById('qrModal');
        modal.style.display = 'none';
    }
    
    // Close modal when clicking outside of it
    window.onclick = function(event) {
        const modal = document.getElementById('qrModal');
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    }
    
    // Close modal with Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeQRModal();
            closeEmailModal();
        }
    });
    
    // Email Instructions Modal Functions
    function showEmailInstructions() {
        const modal = document.getElementById('emailModal');
        modal.style.display = 'block';
    }
    
    function closeEmailModal() {
        const modal = document.getElementById('emailModal');
        modal.style.display = 'none';
    }
    
    function printInstructions() {
        window.print();
    }
    
    function copyInstructions() {
        const instructionsText = `
📱 PERSONEEL APP - EMAIL VERIFICATIE

═══════════════════════════════════════

📧 VOOR MEDEWERKERS:

EERSTE KEER INLOGGEN:
1. Geef uw email door aan de manager
2. Wacht tot email geactiveerd is
3. Open Personeel App en voer email in
4. Ontvang verificatiecode per email (geldig 10 min)
5. Voer code in → Ingelogd! ✅

BELANGRIJK:
• Login blijft 30 DAGEN geldig
• Geen dagelijkse login nodig
• Gebruik alleen geregistreerde email
• Deel toegang niet met anderen

═══════════════════════════════════════

🔧 VOOR MANAGERS:

EMAIL TOEVOEGEN:
1. Beheer Console → Instellingen
2. Cloudflare Zero Trust Configuratie
3. Voer API Token en Account ID in
4. Lijst medewerker emails (één per regel)
5. Klik "Bijwerk Cloudflare Beleid"
6. Controleer met "Bekijk Huidig Beleid"

═══════════════════════════════════════

❌ PROBLEMEN OPLOSSEN:

Geen toegang?
- Check of email geregistreerd is
- Kijk in spam folder
- Probeer opnieuw na 5 min

Code niet ontvangen?
- Wacht 2-3 minuten
- Check spam/junk folder
- Vraag manager om email opnieuw toe te voegen

Sessie verlopen?
- Login opnieuw (zelfde proces)
- Blijft weer 30 dagen geldig

═══════════════════════════════════════

✅ FUNCTIONALITEIT:
• Bestellingen plaatsen voor gasten
• Menu bekijken en selecteren
• Tafel PIN codes verifiëren
• Bestel geschiedenis bekijken
• Tafel status beheren

═══════════════════════════════════════

📞 CONTACT: support@cislink.nl
        `;
        
        // Copy to clipboard
        navigator.clipboard.writeText(instructionsText).then(() => {
            alert('✅ Instructies gekopieerd naar klembord!\n\nU kunt deze nu plakken in WhatsApp, email of een document.');
        }).catch(err => {
            console.error('Kopiëren mislukt:', err);
            // Fallback: show text in alert
            alert('Kopieer deze tekst handmatig:\n\n' + instructionsText);
        });
    }
    
    // Close email modal when clicking outside
    window.addEventListener('click', function(event) {
        const qrModal = document.getElementById('qrModal');
        const emailModal = document.getElementById('emailModal');
        
        if (event.target === qrModal) {
            qrModal.style.display = 'none';
        }
        if (event.target === emailModal) {
            emailModal.style.display = 'none';
        }
    });
</script>

</html>