<!DOCTYPE html>
<html lang="nl" target="_top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <!-- æ ·å¼ä¸å­—ä½“ -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- åªä½¿ç”¨CDNç‰ˆæœ¬çš„FontAwesomeï¼Œé¿å…æœ¬åœ°å­—ä½“æ–‡ä»¶404é”™è¯¯ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Libre+Barcode+128&family=Roboto&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">

  <!-- JS ç¬¬ä¸‰æ–¹åº“ -->
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
  <!-- å‘˜å·¥ç‰ˆæœ¬ä¸éœ€è¦Googleç¿»è¯‘åŠŸèƒ½ -->

  <!-- Firebase åˆå§‹åŒ– -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCRmQTQ2eYkavNh4C0pkggIaGbWz4iWE3Q",
      authDomain: "cislink.firebaseapp.com",
      databaseURL: "https://cislink-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "cislink",
      storageBucket: "cislink.firebasestorage.app",
      messagingSenderId: "295505146634",
      appId: "1:295505146634:web:4cfa3c9e00344060f7c0f3",
      measurementId: "G-CQ705CDDCV"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
  </script>


  <!-- æœ¬åœ°æ ·å¼è¡¨å¼•ç”¨ -->
  <link rel="stylesheet" href="style-css.css">
  <link rel="stylesheet" href="notification-css.css">

  <title>Asian Boulevard - å‘˜å·¥ç‚¹é¤ç³»ç»Ÿ</title>
</head>


<body class="theme-blue-dragon">

  <header>
    <!-- ç®€æ´çš„å‘˜å·¥æ¡Œå·é€‰æ‹©å™¨ - å±…ä¸­è®¾è®¡ -->
    <div class="header-container">
      <!-- å·¦ä¸Šè§’æ¡Œå·æ˜¾ç¤º -->
      <div id="current-table-number" class="current-table-number">1</div>
      
      <div id="staff-table-selector" class="staff-table-selector">
        <div class="table-selector-content" id="table-selector-content">
          <label class="table-select-label">Tafel:</label>
          <div id="current-table-display" class="current-table-display">
            <span id="current-table-text">Kies een tafel</span>
            <i class="fas fa-chevron-down table-selector-arrow"></i>
          </div>
          <!-- éšè—çš„ä¸‹æ‹‰æ¡†ï¼Œä»…ç”¨äºæ•°æ®åŒæ­¥ -->
          <select id="table-select" class="table-select-dropdown" style="display: none;">
            <option value="">Kies een tafel</option>
          </select>
        </div>
      </div>
    </div>

    <!-- æ¡Œå·åˆ—è¡¨å¼¹çª— -->
    <div id="table-list-modal" class="table-list-modal" style="display: none;">
      <div class="modal-overlay" id="table-modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>Kies een tafel</h3>
          <button class="modal-close" id="table-modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="table-grid" id="table-grid">
            <!-- æ¡Œå·å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
          </div>
        </div>
      </div>
    </div>

    <div id="restName" class="notranslate" style="display: none;"></div>
    <div id="timer" class="notranslate" style="display: none;"></div>

    <div id="limiet_eten" class="notranslate" style="display: none;"></div>
    <div id="refreshURL" class="notranslate" style="display: none;"></div>
    <div id="webhook" class="notranslate" style="display: none;"></div>
    <div id="limiet_dessert" class="notranslate" style="display: none;"></div>
    <div id="aantal_pers" class="notranslate" style="display: none;"></div>
    <div id="lastInvoiceNum" class="notranslate" style="display: none;"></div>
    <div id="maxTijd" class="notranslate" style="display: none;"></div>
    <div id="eerste_ronde_tijd" class="notranslate" style="display: none;"></div>
    <div id="pythonAuth" class="notranslate" style="display: none;"></div>
    <div id="restNaam" class="notranslate" style="display: none;"></div>
    <div id="tafelNummer" class="notranslate" style="display: none;"></div>
    <div id="savedPin" class="notranslate" style="display: none;"></div>
    <div id="webhookHealthUrl" class="notranslate" style="display: none;"></div>
    <div id="tafelStatus" class="notranslate" style="display: none;"></div>
    <div id="packageType" class="notranslate" style="display: none;">normal</div>
  </header>


  <main class="main-container flex-row">


    <!-- //progress bar  -->
    <div class="full-screen-overlay" id="overlay">
      <div class="spinner"></div>
    </div>
    <div id="overlay-2" class="prevent-scroll"></div>

    <section class="menu-payment grid">
      <!-- Your menu and payment section content goes here -->
      <div class="menu flex-row" id="menu">

      </div>

    </section>


    <section class="order flex-column" id="mainBody">
      <!-- Your order section content goes here -->
      <article class="receipt flex-column" width="95vw">
        <div class="company-info flex-column">
          <!-- Restaurant logo -->
          <img id="logo-img-receipt" src="" width="30%" height="auto">

          <!-- Tafelnummer en factuurnummer -->
          <p id="tafel-nummer">Tafel - </p>
          <p id="invoice-number"></p>
        </div>

        <div class="receipt-details">
          <table class="details-table">
            <thead>
              <tr>
                <td class="dotted-border" colspan="5"></td>
              </tr>
              <tr>
                <td class="empty-border" colspan="5"></td>
              </tr>
              <tr>
                <th class="sku">SKU</th> <!-- New column for SKU -->
                <th class="description">Product</th>
                <th class="quantity">Aantal</th>
                <th class="price">Prijs</th>
                <!-- <th class="subtotal">Sub</th> -->
                <th class="delete">Bewerk</th>
              </tr>
              <tr>
                <td class="dotted-border" colspan="5"></td>
              </tr>
              <tr>
                <td class="empty-border" colspan="5"></td>
              </tr>
            </thead>
            <tbody id="receipt-details">

            </tbody>
          </table>
        </div>
        <div class="receipt-summary" style="display: none;">
          <table class="summary-table">
            <tbody class="summary-table" id="total-summary">
              <tr>
                <td class="dotted-border" colspan="5"></td>
              </tr>
              <tr>
                <td class="empty-border" colspan="5"></td>
              </tr>
              <tr>
                <td class="notranslate">Totaal excl.ï¼š</td>
                <td id="subtotal-summary">â‚¬0.00</td>
                <td></td>
              </tr>
              <tr>
                <td class="notranslate">Btwï¼š</td>
                <td id="tax-summary">â‚¬0.00</td>
                <td></td>
              </tr>
              <tr>
                <td class="notranslate">Totaal incl.ï¼š</td>
                <td class="to-pay" id="grandtotal-summary">â‚¬0.00</td>
                <td></td>
              </tr>
            </tbody>
            <tbody class="summary-table" id="payment-summary">
              <tr>
                <td>Invoer bedrag:</td>
                <td id="amount-paid">â‚¬0.00</td>
                <td></td>
              </tr>
              <tr>
                <td id="tip-change-title">Wisselgeld:</td>
                <td id="tip-change-value"></td>
                <td></td>
              </tr>
              <tr>
                <td>Betaalmethode:</td>
                <td id="payment-type"></td>
                <td></td>
              </tr>
              <tr>
                <td class="dotted-border" colspan="5"></td>
              </tr>
              <tr>
                <td class="empty-border" colspan="5"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </article>



      <div class="orderBtn" id="orderBtns">
        <button id="order-history" class="order-action-btn">
          <i class="fas fa-archive"></i>
          <span class="notranslate">Historie</span>
        </button>
        <button id="show-bevestig-btn" class="order-action-btn">
          <i class="fas fa-archive"></i>
          <span class="notranslate">Laaste order</span>
        </button>
        <button id="order-verzend" class="order-action-btn">
          <i class="fas fa-paper-plane"></i>
          <span class="notranslate">Verzend</span>
        </button>
        <button id="order-clear" class="order-action-btn" style="background:#661414;color:#fff;">
          <i class="fas fa-trash-alt"></i>
          <span class="notranslate">Leegmaken</span>
        </button>
      </div>




      <!-- Dropdown menu for filtering -->

      </div>








      <div class="orderDataWindow  flex-column" id="orderHistoryFrame">
        <!-- This div represents the order data window with the ID "orderHistoryFrame" -->
        <p class="order-data-show" id="lastOrderPage"></p>
        <!-- This paragraph element with the ID "lastOrderPage" displays the order data -->
        <div class="close-paypad">
          <!-- This div contains the close button for the order data window -->
          <button class="btn" id="close-btn"><i class="fas fa-times" id="confirm-close"></i>afsluiten</button>
          <!-- This button with the ID "confirm-close" serves as the close button for the order data window -->
        </div>
      </div>


      <div class="payment grid" id="payment-overlay">
        <!-- This div represents the payment overlay with the ID "payment-overlay" -->
      </div>


      <!-- this is the error message when ppl try to click on the order'verzend'button, while nothing was added -->
      <!-- HTML for the message box -->
      <div id="message-box"
        style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(0, 0, 0, 0.8); color: white; padding: 10px; border-radius: 5px;">
      </div>

    </section>





    <!-- Add this code inside the <body> section of your HTML file -->
    <div id="message-container"></div>
    <div id="message-container-notAdd"></div>


    <!-- bevestiging, nadat heeft gedrukt op de knoop -->


    <div class="receipt-footer flex-row" id="categorie">
      <div class="submenu" id="foodSubMenu" style="display: none;"></div>
      <div class="submenu" id="drinksSubMenu" style="display: none;"></div>

      <!-- ä¸€çº§æŒ‰é’®å®¹å™¨ -->
      <a class="btn btn-outline-primary btn-lg active btn-menu btn-lvl1" href="#" role="button" aria-pressed="true"
        data-target="foodSubMenu" id="btn-food-main">
        Eten
      </a>
      <a class="btn btn-outline-primary btn-lg active btn-menu btn-lvl1" href="#" role="button" aria-pressed="true"
        data-target="drinksSubMenu" id="btn-drink-main">
        Dranken
      </a>
      <!-- æ–°å¢ï¼šMenu's ä¸€çº§æŒ‰é’®ï¼ˆåŠ¨æ€é”å®šåˆ° exceptions ä¸­çš„å¥—é¤ï¼‰ -->
      <a class="btn btn-outline-primary btn-lg active btn-menu btn-lvl1" href="#" role="button" aria-pressed="true"
        id="btn-service-main" data-target="serviceSubMenu" data-config-key="serviceCat">
        Menu's
      </a>
      <div class="submenu" id="serviceSubMenu" style="display:none;"></div>
    </div>

    <!-- Level 1 Services Button -->
    <!-- <a class="btn btn-outline-primary btn-lg active btn-menu btn-lvl1" id="service-btn" href="#<?=Cat18id?>"
        role="button" aria-pressed="true">
        <?=Knop_service?>
      </a> -->
    </div>








    <div class="paypad flex-row" id="paypad">
      <!-- This div represents the paypad section -->
      <!-- This button with the ID "close-sale" serves as the confirmation button for the paypad section -->
      <table class="button-table">
        <tr>
          <td>
            <button class="paypad-btn span3-col btn btn-success" id="close-sale"
              data-id="close-sale">Bevestigen</button>
          </td>
        </tr>
        <tr>
          <td>
            <button class="paypad-btn span3-col btn btn-danger" id="verzend-close">Annuleren</button>
          </td>

        </tr>
      </table>

    </div>
    <div id="paypad-overlay"></div>

    <span id="searchIcon">&#128269;</span> <!-- Placeholder for magnifying lens icon -->
    <div id="searchContainer" class="hidden">
      <input type="text" id="searchBar" placeholder="Zoeken...">
      <span id="closeSearch">&#10006;</span> <!-- Placeholder for close icon -->
      <div id="searchResults" class="search-results"></div>
    </div>




    <!-- Button for order list -->
    <button id="toggle-order-list" class="custom-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-cart-check-fill"
        viewBox="0 0 16 16">
        <path
          d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-1.646-7.646-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L8 8.293l2.646-2.647a.5.5 0 0 1 .708.708" />
      </svg>
    </button>

    <!-- Button for toggling footer -->
    <button id="toggle-footer-btn" class="custom-btn floating-button">
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-square-half"
        viewBox="0 0 16 16">
        <path
          d="M8 15V1h6a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1zm6 1a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z" />
      </svg>
    </button>


  </main>

  <!-- ///////////////////////////////////////////////////////////////////////////////// -->

  <div class="container" id="historyContainer">

    <!-- ///////////////////the overlay to cover the screen when dorpdown option is selected////////////////////// -->
    <div id="overlay-history">
      <div class="loader"></div>
    </div>

    <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
    <button class="btn" id="close-btn1"><i class="fas fa-times" id="history-close"></i></button>

    <div class="history-details" id="history-panel">
      <table class="history-table">
        <div id="h3-heading">
          <h5>Bestelgeschiedenis # - <span id="ronde"></span></h5>
        </div>
        <div id="time">
          <p>Besteltijd: <span id="timestamp"></span> </P>
        </div>
        <thead>
          <tr>
            <th class="description">Naam</th>
            <th class="quantity">Aantal</th>
            <th class="price">Prijs</th>
          </tr>
        </thead>
        <tbody id="history-details">
          <!-- Table rows will be dynamically populated here -->
        </tbody>
      </table>
    </div>
    <div class="dropdown-container" id="orderHistories">
      <label for="filter-dropdown">Bezig met laden van bestelgeschiedenis...</label>

      <select id="filter-dropdown">
        <!-- Options will be dynamically populated -->
      </select>
    </div>
  </div>

  <!-- å‘˜å·¥ç‰ˆæœ¬ä¸éœ€è¦ç¿»è¯‘åŠŸèƒ½ -->
  <!-- å‘˜å·¥ç‰ˆæœ¬ä¸éœ€è¦Googleç¿»è¯‘å…ƒç´  -->
  <script src="sku-error-guard.js"></script>
  <script src="firebase-loader.js"></script>
  <script src="class-order-js.js"></script>
  <script src="script-js.js"></script>
  <script src="javascript.js"></script>
  <script src="food-info-js.js"></script>
  <!-- å‘˜å·¥ç‰ˆæœ¬ä¸éœ€è¦ç¿»è¯‘åŠŸèƒ½ -->
  <script src="verificatie-realtimeListener-js.js"></script>
  <script src="sendingOrder.js"></script>
  <script src="whatsapp-module.js"></script>

  <script>
    // Staff Table Selector Logic
    document.addEventListener('DOMContentLoaded', function () {
      const tableSelect = document.getElementById('table-select');
      const selectedTableDisplay = document.getElementById('selected-table-display');
      const currentTableText = document.getElementById('current-table-text');
      const tableSelectorContent = document.getElementById('table-selector-content');
      const tableListModal = document.getElementById('table-list-modal');
      const tableModalOverlay = document.getElementById('table-modal-overlay');
      const tableModalClose = document.getElementById('table-modal-close');
      const tableGrid = document.getElementById('table-grid');

      // Debug: æ£€æŸ¥æ‰€æœ‰å…ƒç´ æ˜¯å¦æ­£ç¡®è·å–
      console.log('ğŸ” æ£€æŸ¥DOMå…ƒç´ :');
      console.log('- tableSelect:', tableSelect);
      console.log('- selectedTableDisplay:', selectedTableDisplay);
      console.log('- currentTableText:', currentTableText);
      console.log('- tableSelectorContent:', tableSelectorContent);
      console.log('- tableListModal:', tableListModal);
      console.log('- tableModalOverlay:', tableModalOverlay);
      console.log('- tableModalClose:', tableModalClose);
      console.log('- tableGrid:', tableGrid);

      // Debug: åˆ›å»ºå…¨å±€æµ‹è¯•å‡½æ•°
      window.testTableModal = function() {
        console.log('ğŸ§ª æµ‹è¯•æ¡Œå·é€‰æ‹©å¼¹çª—...');
        showTableModal();
      };

      window.debugTableSelector = function() {
        console.log('ğŸ” è°ƒè¯•æ¡Œå·é€‰æ‹©å™¨çŠ¶æ€:');
        console.log('tableSelectorContent:', tableSelectorContent);
        console.log('tableListModal:', tableListModal);
        console.log('å…ƒç´ å¯è§æ€§:');
        if (tableSelectorContent) {
          const style = window.getComputedStyle(tableSelectorContent);
          console.log('- display:', style.display);
          console.log('- visibility:', style.visibility);
          console.log('- opacity:', style.opacity);
          console.log('- pointer-events:', style.pointerEvents);
        }
      };

      // Initialize default table number immediately
      const tafelNummerElement = document.getElementById('tafelNummer');
      if (tafelNummerElement && !tafelNummerElement.textContent.trim()) {
        tafelNummerElement.textContent = "1";
      }

      const tafelNummerDisplay = document.getElementById('tafel-nummer');
      if (tafelNummerDisplay && !tafelNummerDisplay.textContent.trim()) {
        tafelNummerDisplay.textContent = "Tafel - 1";
      }

      // Initialize current table display
      if (currentTableText) {
        currentTableText.textContent = "Tafel 1";
      }
      
      // åˆå§‹åŒ–å·¦ä¸Šè§’æ¡Œå·æ˜¾ç¤º
      const currentTableNumberElement = document.getElementById('current-table-number');
      if (currentTableNumberElement) {
        currentTableNumberElement.textContent = "1";
      }

      // Table data storage for modal
      let tablesData = {};

      // Show table list modal
      function showTableModal() {
        console.log('ğŸ“‹ æ˜¾ç¤ºæ¡Œå·åˆ—è¡¨å¼¹çª—');
        console.log('tableListModal å…ƒç´ :', tableListModal);
        console.log('å½“å‰ display æ ·å¼:', tableListModal ? tableListModal.style.display : 'element not found');
        
        if (!tableListModal) {
          console.error('âŒ æ‰¾ä¸åˆ°æ¡Œå·åˆ—è¡¨å¼¹çª—å…ƒç´ ï¼');
          return;
        }
        
        loadTablesIntoModal();
        tableListModal.style.display = 'block';
        document.body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
        
        console.log('âœ… å¼¹çª—æ˜¾ç¤ºå®Œæˆï¼Œæ–°çš„ display æ ·å¼:', tableListModal.style.display);
      }

      // Hide table list modal
      function hideTableModal() {
        console.log('ğŸ“‹ éšè—æ¡Œå·åˆ—è¡¨å¼¹çª—');
        tableListModal.style.display = 'none';
        document.body.style.overflow = ''; // æ¢å¤æ»šåŠ¨
      }

      // Load tables into modal grid
      async function loadTablesIntoModal() {
        try {
          console.log('ğŸ“‹ åŠ è½½æ¡Œå·åˆ°å¼¹çª—ç½‘æ ¼...');
          
          if (!window.AppConfig?.configReady) {
            console.warn('âš ï¸ AppConfig not ready, using fallback data');
            loadFallbackTablesIntoModal();
            return;
          }

          const database = firebase.database();
          const restaurantPath = AppConfig.restName;
          
          const snapshot = await database.ref(`${restaurantPath}/tafel`).once('value');
          const firebaseTablesData = snapshot.val();
          
          if (firebaseTablesData) {
            tablesData = firebaseTablesData;
            await renderTableGrid(firebaseTablesData);
          } else {
            loadFallbackTablesIntoModal();
          }
        } catch (error) {
          console.error('âŒ åŠ è½½å¼¹çª—æ¡Œå·å¤±è´¥:', error);
          loadFallbackTablesIntoModal();
        }
      }

      // Render table grid in modal
      async function renderTableGrid(firebaseTablesData) {
        tableGrid.innerHTML = ''; // æ¸…ç©ºç°æœ‰å†…å®¹
        
        const tableIds = Object.keys(firebaseTablesData);
        console.log('ğŸ“‹ æ¸²æŸ“æ¡Œå·ç½‘æ ¼:', tableIds.length, 'tables');
        
        // æ’åºæ¡Œå·
        tableIds.sort((a, b) => {
          const aMatch = a.match(/\d+/);
          const bMatch = b.match(/\d+/);
          if (aMatch && bMatch) {
            return parseInt(aMatch[0]) - parseInt(bMatch[0]);
          }
          return a.localeCompare(b);
        });

        for (const tableId of tableIds) {
          const displayId = tableId.replace('Tafel-', '');
          const tableData = firebaseTablesData[tableId];
          
          // Create table item
          const tableItem = document.createElement('div');
          tableItem.className = 'table-item';
          tableItem.dataset.tableId = displayId;
          
          // Check if this table is currently selected
          const currentSelection = tableSelect.value;
          if (currentSelection === displayId) {
            tableItem.classList.add('selected');
          }
          
          // Check for history
          let hasHistory = false;
          let historyCount = 0;
          try {
            const historyData = tableData?.orders?.history;
            if (historyData && Object.keys(historyData).length > 0) {
              hasHistory = true;
              historyCount = Object.keys(historyData).length;
              tableItem.classList.add('has-history');
            }
          } catch (error) {
            console.warn(`âš ï¸ Error checking history for table ${displayId}:`, error);
          }
          
          // Create table content
          tableItem.innerHTML = `
            <div class="table-number">Tafel ${displayId}</div>
            <div class="table-status">${tableData?.Status || 'open'}</div>
            ${hasHistory ? `<div class="history-badge">${historyCount}</div>` : ''}
          `;
          
          // Add click handler
          tableItem.addEventListener('click', () => {
            console.log('ğŸ“‹ é€‰æ‹©æ¡Œå·:', displayId);
            selectTableFromModal(displayId);
          });
          
          tableGrid.appendChild(tableItem);
        }
        
        console.log('âœ… æ¡Œå·ç½‘æ ¼æ¸²æŸ“å®Œæˆ');
      }

      // Fallback tables for modal
      function loadFallbackTablesIntoModal() {
        console.log('ğŸ“‹ ä½¿ç”¨å¤‡ç”¨æ¡Œå·æ–¹æ¡ˆåŠ è½½åˆ°å¼¹çª—');
        tableGrid.innerHTML = '';
        
        for (let i = 1; i <= 30; i++) {
          const tableItem = document.createElement('div');
          tableItem.className = 'table-item';
          tableItem.dataset.tableId = i.toString();
          
          // Check if selected
          const currentSelection = tableSelect.value;
          if (currentSelection === i.toString()) {
            tableItem.classList.add('selected');
          }
          
          tableItem.innerHTML = `
            <div class="table-number">Tafel ${i}</div>
            <div class="table-status">open</div>
          `;
          
          tableItem.addEventListener('click', () => {
            selectTableFromModal(i.toString());
          });
          
          tableGrid.appendChild(tableItem);
        }
      }

      // Select table from modal
      async function selectTableFromModal(tableId) {
        console.log('ğŸ“‹ ä»å¼¹çª—é€‰æ‹©æ¡Œå·:', tableId);
        
        // Update hidden dropdown for data consistency
        tableSelect.value = tableId;
        
        // Update visible display
        if (currentTableText) {
          currentTableText.textContent = `Tafel ${tableId}`;
        }
        
        // æ›´æ–°å·¦ä¸Šè§’æ¡Œå·æ˜¾ç¤º
        const currentTableNumberElement = document.getElementById('current-table-number');
        if (currentTableNumberElement) {
          currentTableNumberElement.textContent = tableId;
        }
        
        // Update global table number
        window.tableNumber = tableId;

        // Update DOM element that other scripts depend on
        const tafelNummerElement = document.getElementById('tafelNummer');
        if (tafelNummerElement) {
          tafelNummerElement.textContent = tableId;
        }

        // Update visible table display
        const tafelNummerDisplay = document.getElementById('tafel-nummer');
        if (tafelNummerDisplay) {
          tafelNummerDisplay.textContent = `Tafel - ${tableId}`;
        }

        // Update AppConfig for staff mode
        if (window.AppConfig && window.AppConfig.updateTableId) {
          window.AppConfig.updateTableId(tableId);
        }

        // âœ… è°ƒç”¨ setupRealtimeListeners æ¥æ›´æ–° invoice-number å’Œå…¶ä»–ç›‘å¬å™¨
        if (window.__orderInstance && typeof window.__orderInstance.setupRealtimeListeners === 'function') {
          console.log('ğŸ”„ é‡æ–°è®¾ç½®å®æ—¶ç›‘å¬å™¨ä»¥æ›´æ–° invoice-number...');
          try {
            await window.__orderInstance.setupRealtimeListeners();
            console.log('âœ… å®æ—¶ç›‘å¬å™¨é‡æ–°è®¾ç½®å®Œæˆ');
          } catch (error) {
            console.error('âŒ è®¾ç½®å®æ—¶ç›‘å¬å™¨å¤±è´¥:', error);
          }
        } else {
          console.warn('âš ï¸ Order instance æˆ– setupRealtimeListeners æ–¹æ³•æœªæ‰¾åˆ°');
        }

        // Trigger any existing table change handlers
        if (window.onTableChange) {
          window.onTableChange(tableId);
        }

        console.log('âœ… Staff selected table:', tableId, '- Updated all references and listeners');
        
        // Close modal
        hideTableModal();
      }

      // Event listeners for modal
      if (tableSelectorContent) {
        tableSelectorContent.addEventListener('click', (e) => {
          // é˜»æ­¢ç‚¹å‡»äº‹ä»¶å†’æ³¡åˆ°ä¸‹æ‹‰æ¡†
          e.preventDefault();
          e.stopPropagation();
          console.log('ğŸ–±ï¸ ç‚¹å‡»äº†æ¡Œå·é€‰æ‹©å™¨ï¼Œå‡†å¤‡æ˜¾ç¤ºå¼¹çª—...');
          console.log('tableSelectorContent element:', tableSelectorContent);
          console.log('tableListModal element:', tableListModal);
          showTableModal();
        });
        
        // å¤‡ç”¨ç‚¹å‡»æ–¹æ³•
        tableSelectorContent.onclick = function(e) {
          e.preventDefault();
          e.stopPropagation();
          console.log('ğŸ–±ï¸ å¤‡ç”¨ç‚¹å‡»æ–¹æ³•è§¦å‘...');
          showTableModal();
        };
        
        console.log('âœ… æ¡Œå·é€‰æ‹©å™¨ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨å·²ç»‘å®š');
      } else {
        console.error('âŒ æ‰¾ä¸åˆ°æ¡Œå·é€‰æ‹©å™¨å…ƒç´ ï¼');
      }

      if (tableModalOverlay) {
        tableModalOverlay.addEventListener('click', hideTableModal);
      }
      
      if (tableModalClose) {
        tableModalClose.addEventListener('click', hideTableModal);
      }

      // è°ƒè¯•æŒ‰é’®äº‹ä»¶
      const debugModalBtn = document.getElementById('debug-modal-btn');
      if (debugModalBtn) {
        debugModalBtn.addEventListener('click', () => {
          console.log('ğŸ”´ è°ƒè¯•æŒ‰é’®è¢«ç‚¹å‡»ï¼Œå¼ºåˆ¶æ˜¾ç¤ºå¼¹çª—');
          showTableModal();
        });
      }

      // ESC key to close modal
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && tableListModal.style.display === 'block') {
          hideTableModal();
        }
      });

      // Populate table options dynamically from Firebase
      async function loadTablesFromFirebase() {
        try {
          // ç­‰å¾…Firebaseé…ç½®å‡†å¤‡å°±ç»ª
          console.log('â³ ç­‰å¾…Firebaseé…ç½®å°±ç»ª...');
          await waitForAppConfig();
          
          const database = firebase.database();
          const restaurantPath = AppConfig.restName; // å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€è·å–
          
          console.log('ğŸ“ è¯·æ±‚Firebaseæ¡Œå·æ•°æ®:', `${restaurantPath}/tafel`);
          const snapshot = await database.ref(`${restaurantPath}/tafel`).once('value');
          const tablesDataFromDB = snapshot.val();
          
          if (tablesDataFromDB) {
            tablesData = tablesDataFromDB; // Store for modal use
            
            // æ¸…ç©ºç°æœ‰é€‰é¡¹ï¼ˆé™¤äº†é»˜è®¤é€‰é¡¹ï¼‰
            const options = tableSelect.querySelectorAll('option:not([value=""])');
            options.forEach(option => option.remove());
            
            // ä»Firebaseæ•°æ®åˆ›å»ºæ¡Œå·é€‰é¡¹
            const tableIds = Object.keys(tablesDataFromDB);
            console.log('ğŸ“‹ ä»FirebaseåŠ è½½çš„æ¡Œå·:', tableIds);
            
            // æŒ‰æ¡Œå·æ’åºï¼ˆæ•°å­—å’Œå­—ç¬¦ä¸²æ··åˆæ’åºï¼‰
            tableIds.sort((a, b) => {
              const aMatch = a.match(/\d+/);
              const bMatch = b.match(/\d+/);
              if (aMatch && bMatch) {
                return parseInt(aMatch[0]) - parseInt(bMatch[0]);
              }
              return a.localeCompare(b);
            });
            
            // åˆ›å»ºé€‰é¡¹å¹¶æ£€æŸ¥å†å²è®°å½•
            for (const tableId of tableIds) {
              const option = document.createElement('option');
              const displayId = tableId.replace('Tafel-', ''); // ç§»é™¤å‰ç¼€æ˜¾ç¤º
              option.value = displayId;
              
              // æ£€æŸ¥è¯¥æ¡Œæ˜¯å¦æœ‰å†å²è®¢å•è®°å½•
              try {
                const historySnapshot = await database.ref(`${restaurantPath}/tafel/${tableId}/orders/history`).once('value');
                const historyData = historySnapshot.val();
                
                if (historyData && Object.keys(historyData).length > 0) {
                  // æœ‰å†å²è®°å½•ï¼Œé«˜äº®æ˜¾ç¤º
                  option.textContent = `ğŸ”¥ Tafel ${displayId} (${Object.keys(historyData).length} orders)`;
                  option.style.background = 'linear-gradient(90deg, #ffd700, #ffed4a)';
                  option.style.color = '#d97706';
                  option.style.fontWeight = 'bold';
                  option.setAttribute('data-has-history', 'true');
                  console.log(`ğŸ“ˆ Tafel ${displayId} has ${Object.keys(historyData).length} orders in history`);
                } else {
                  // æ²¡æœ‰å†å²è®°å½•ï¼Œæ™®é€šæ˜¾ç¤º
                  option.textContent = `Tafel ${displayId}`;
                  option.setAttribute('data-has-history', 'false');
                }
              } catch (historyError) {
                console.warn(`âš ï¸ æ— æ³•è·å–Tafel ${displayId}çš„å†å²è®°å½•:`, historyError);
                option.textContent = `Tafel ${displayId}`;
                option.setAttribute('data-has-history', 'false');
              }
              
              tableSelect.appendChild(option);
            }
            
            console.log(`âœ… æˆåŠŸåŠ è½½ ${tableIds.length} ä¸ªæ¡Œå·é€‰é¡¹ï¼ˆå«å†å²è®°å½•æ£€æŸ¥ï¼‰`);
          } else {
            console.warn('âš ï¸ Firebaseä¸­æœªæ‰¾åˆ°æ¡Œå·æ•°æ®ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ');
            loadFallbackTables();
          }
        } catch (error) {
          console.error('âŒ åŠ è½½æ¡Œå·åˆ—è¡¨å¤±è´¥:', error);
          loadFallbackTables();
        }
      }
      
      // å¤‡ç”¨æ¡Œå·åŠ è½½å‡½æ•°
      function loadFallbackTables() {
        console.log('ğŸ“‹ ä½¿ç”¨å¤‡ç”¨æ¡Œå·æ–¹æ¡ˆ (1-30)');
        for (let i = 1; i <= 30; i++) {
          const option = document.createElement('option');
          option.value = i;
          option.textContent = `Tafel ${i}`;
          tableSelect.appendChild(option);
        }
      }
      
      // ç­‰å¾…è‡ªå®šä¹‰tokenè®¤è¯å®Œæˆ - ä½¿ç”¨å‘˜å·¥ç³»ç»Ÿçš„è®¤è¯æ–¹å¼
      async function waitForCustomTokenAuthentication() {
        try {
          // 1. ç­‰å¾…AppConfigå‡†å¤‡å°±ç»ª
          console.log('â³ ç­‰å¾…AppConfigåŠ è½½å®Œæˆ...');
          await waitForAppConfig();
          
          // 2. è·å–Pythonè®¤è¯URL
          const pythonAuthUrl = window.AppConfig?.pythonAuth;
          if (!pythonAuthUrl) {
            throw new Error('Missing pythonAuth URL in AppConfig');
          }
          
          // 3. è·å–è‡ªå®šä¹‰token
          console.log('ğŸ”‘ è·å–è‡ªå®šä¹‰token...', pythonAuthUrl);
          const response = await fetch(pythonAuthUrl, { method: 'GET' });
          
          if (!response.ok) {
            throw new Error(`Failed to get auth token: ${response.statusText}`);
          }
          
          const data = await response.json();
          if (!data.token) {
            throw new Error('No token received from backend');
          }
          
          // 4. ä½¿ç”¨è‡ªå®šä¹‰tokenç™»å½•Firebase
          console.log('ğŸ”‘ ä½¿ç”¨è‡ªå®šä¹‰tokenç™»å½•Firebase...');
          await firebase.auth().signInWithCustomToken(data.token);
          
          console.log('âœ… Firebaseè‡ªå®šä¹‰tokenè®¤è¯æˆåŠŸ');
          
        } catch (error) {
          console.error('âŒ è‡ªå®šä¹‰tokenè®¤è¯å¤±è´¥:', error);
          throw error;
        }
      }
      
      // ç­‰å¾…AppConfigåŠ è½½å®Œæˆ
      function waitForAppConfig() {
        return new Promise((resolve) => {
          const checkConfig = () => {
            if (window.AppConfig?.configReady) {
              resolve();
            } else {
              setTimeout(checkConfig, 100);
            }
          };
          checkConfig();
        });
      }
      
      // å»¶è¿Ÿè°ƒç”¨åŠ¨æ€åŠ è½½å‡½æ•°ï¼Œç­‰å¾…firebase-loader.jså®Œæˆåˆå§‹åŒ–
      setTimeout(() => {
        loadTablesFromFirebase();
      }, 2000); // ç»™Firebaseé…ç½®å’Œè®¤è¯æ›´å¤šæ—¶é—´

      // Handle table selection (keeping the change listener for backward compatibility)
      tableSelect.addEventListener('change', async function () {
        const selectedTable = this.value;
        if (selectedTable && currentTableText) {
          // Update visible display
          currentTableText.textContent = `Tafel ${selectedTable}`;
          
          // æ›´æ–°å·¦ä¸Šè§’æ¡Œå·æ˜¾ç¤º
          const currentTableNumberElement = document.getElementById('current-table-number');
          if (currentTableNumberElement) {
            currentTableNumberElement.textContent = selectedTable;
          }
          
          // Update global table number
          window.tableNumber = selectedTable;

          // Update DOM element that other scripts depend on
          const tafelNummerElement = document.getElementById('tafelNummer');
          if (tafelNummerElement) {
            tafelNummerElement.textContent = selectedTable;
          }

          // Update visible table display
          const tafelNummerDisplay = document.getElementById('tafel-nummer');
          if (tafelNummerDisplay) {
            tafelNummerDisplay.textContent = `Tafel - ${selectedTable}`;
          }

          // Update AppConfig for staff mode
          if (window.AppConfig && window.AppConfig.updateTableId) {
            window.AppConfig.updateTableId(selectedTable);
          }

          // âœ… è°ƒç”¨ setupRealtimeListeners æ¥æ›´æ–° invoice-number å’Œå…¶ä»–ç›‘å¬å™¨
          if (window.__orderInstance && typeof window.__orderInstance.setupRealtimeListeners === 'function') {
            console.log('ğŸ”„ é‡æ–°è®¾ç½®å®æ—¶ç›‘å¬å™¨ä»¥æ›´æ–° invoice-number...');
            try {
              await window.__orderInstance.setupRealtimeListeners();
              console.log('âœ… å®æ—¶ç›‘å¬å™¨é‡æ–°è®¾ç½®å®Œæˆ');
            } catch (error) {
              console.error('âŒ è®¾ç½®å®æ—¶ç›‘å¬å™¨å¤±è´¥:', error);
            }
          } else {
            console.warn('âš ï¸ Order instance æˆ– setupRealtimeListeners æ–¹æ³•æœªæ‰¾åˆ°');
          }

          // Trigger any existing table change handlers
          if (window.onTableChange) {
            window.onTableChange(selectedTable);
          }

          console.log('âœ… Staff selected table:', selectedTable, '- Updated all references and listeners');
        } else if (!selectedTable) {
          // Reset display
          if (currentTableText) {
            currentTableText.textContent = "Kies een tafel";
          }
          
          // é‡ç½®å·¦ä¸Šè§’æ¡Œå·æ˜¾ç¤ºä¸ºé»˜è®¤å€¼1
          const currentTableNumberElement = document.getElementById('current-table-number');
          if (currentTableNumberElement) {
            currentTableNumberElement.textContent = "1";
          }
          
          window.tableNumber = null;

          // Reset DOM elements
          const tafelNummerElement = document.getElementById('tafelNummer');
          if (tafelNummerElement) {
            tafelNummerElement.textContent = "1"; // Default to table 1
          }

          const tafelNummerDisplay = document.getElementById('tafel-nummer');
          if (tafelNummerDisplay) {
            tafelNummerDisplay.textContent = `Tafel - 1`;
          }

          // Reset to default table 1 for staff mode
          if (window.AppConfig && window.AppConfig.updateTableId) {
            window.AppConfig.updateTableId("1");
          }

          // âœ… é‡ç½®åˆ°é»˜è®¤æ¡Œå·æ—¶ä¹Ÿé‡æ–°è®¾ç½®ç›‘å¬å™¨
          if (window.__orderInstance && typeof window.__orderInstance.setupRealtimeListeners === 'function') {
            console.log('ğŸ”„ é‡ç½®åˆ°é»˜è®¤æ¡Œå·ï¼Œé‡æ–°è®¾ç½®å®æ—¶ç›‘å¬å™¨...');
            try {
              await window.__orderInstance.setupRealtimeListeners();
              console.log('âœ… é»˜è®¤æ¡Œå·å®æ—¶ç›‘å¬å™¨è®¾ç½®å®Œæˆ');
            } catch (error) {
              console.error('âŒ é»˜è®¤æ¡Œå·ç›‘å¬å™¨è®¾ç½®å¤±è´¥:', error);
            }
          }
        }
      });
      
      // å®æ—¶ç›‘å¬è®¢å•å˜åŒ–å¹¶æ›´æ–°æ¡Œå·é«˜äº®æ˜¾ç¤º
      function setupTableHistoryListener() {
        if (!window.AppConfig || !window.AppConfig.configReady) {
          setTimeout(setupTableHistoryListener, 1000);
          return;
        }
        
        const database = firebase.database();
        const restaurantPath = AppConfig.restName;
        
        console.log('ğŸ”„ è®¾ç½®æ¡Œå·å†å²ç›‘å¬å™¨...');
        
        // ç›‘å¬æ‰€æœ‰æ¡Œå·çš„è®¢å•å†å²å˜åŒ–
        database.ref(`${restaurantPath}/tafel`).on('child_changed', async (snapshot) => {
          const tableId = snapshot.key;
          const displayId = tableId.replace('Tafel-', '');
          
          // æŸ¥æ‰¾å¯¹åº”çš„é€‰é¡¹å…ƒç´ 
          const option = tableSelect.querySelector(`option[value="${displayId}"]`);
          if (option) {
            try {
              // é‡æ–°æ£€æŸ¥å†å²è®°å½•
              const historySnapshot = await database.ref(`${restaurantPath}/tafel/${tableId}/orders/history`).once('value');
              const historyData = historySnapshot.val();
              
              if (historyData && Object.keys(historyData).length > 0) {
                // æ›´æ–°ä¸ºæœ‰å†å²è®°å½•çš„æ ·å¼
                option.textContent = `ğŸ”¥ Tafel ${displayId} (${Object.keys(historyData).length} orders)`;
                option.style.background = 'linear-gradient(90deg, #ffd700, #ffed4a)';
                option.style.color = '#d97706';
                option.style.fontWeight = 'bold';
                option.setAttribute('data-has-history', 'true');
                console.log(`ğŸ”¥ Tafel ${displayId} å†å²è®°å½•å·²æ›´æ–°: ${Object.keys(historyData).length} orders`);
              } else {
                // æ¢å¤ä¸ºæ— å†å²è®°å½•çš„æ ·å¼
                option.textContent = `Tafel ${displayId}`;
                option.style.background = '';
                option.style.color = '';
                option.style.fontWeight = '';
                option.setAttribute('data-has-history', 'false');
                console.log(`ğŸ“‹ Tafel ${displayId} å†å²è®°å½•å·²æ¸…é™¤`);
              }
            } catch (error) {
              console.error(`âŒ æ›´æ–°Tafel ${displayId}å†å²çŠ¶æ€å¤±è´¥:`, error);
            }
          }
        });
      }
      
      // å¯åŠ¨å†å²ç›‘å¬å™¨
      setTimeout(setupTableHistoryListener, 4000);
    });
  </script>



  <!-- FAB (moved to end of body for Safari/iOS compatibility) -->
  <div id="fab-dial" class="fab-container" aria-label="Acties" aria-expanded="false">
    <button id="fab-main" class="fab-main" aria-haspopup="true" aria-controls="fab-actions">
      <span class="fab-icon" id="fab-icon-plus">ï¼‹</span>
      <span class="fab-icon hidden" id="fab-icon-close">âœ•</span>
    </button>
    <ul id="fab-actions" class="fab-actions" role="menu">
      <li role="menuitem">
        <button class="fab-action" data-action="history" title="Historie">
          <i class="fas fa-archive"></i>
        </button>
        <span class="fab-label">Historie</span>
      </li>
      <li role="menuitem">
        <button class="fab-action" data-action="last" title="Laatste order">
          <i class="fas fa-history"></i>
        </button>
        <span class="fab-label">Laatste</span>
      </li>
      <li role="menuitem">
        <button class="fab-action fab-send" data-action="send" title="Verzend" style="position:relative;">
          <i class="fas fa-paper-plane"></i>
          <span id="fab-send-badge" class="fab-badge">0</span>
        </button>
        <span class="fab-label fab-label-strong">Verzend</span>
      </li>
      <li role="menuitem">
        <button class="fab-action danger" data-action="clear" title="Leegmaken">
          <i class="fas fa-trash"></i>
        </button>
        <span class="fab-label">Leegmaken</span>
      </li>
    </ul>
  </div>
  <script>
    // FAB: keep above footer and safe area on iOS
    (function () {
      const dial = document.getElementById('fab-dial');
      const main = document.getElementById('fab-main');
      const plus = document.getElementById('fab-icon-plus');
      const close = document.getElementById('fab-icon-close');
      const footer = document.querySelector('.receipt-footer, #categorie'); // adjust if needed

      function setFabBottom() {
        const footerH = footer ? footer.getBoundingClientRect().height : 0;
        // 16px gap + safe area + footer height
        const px = 16 + footerH;
        dial.style.setProperty('--fab-bottom', `calc(env(safe-area-inset-bottom) + ${px}px)`);
      }

      // Toggle actions
      main?.addEventListener('click', () => {
        const expanded = dial.getAttribute('aria-expanded') === 'true';
        dial.setAttribute('aria-expanded', String(!expanded));
        plus?.classList.toggle('hidden', !expanded === true);
        close?.classList.toggle('hidden', expanded === true);
      });

      // Recompute on layout changes
      ['load', 'resize', 'orientationchange'].forEach(ev => window.addEventListener(ev, setFabBottom));
      if ('ResizeObserver' in window && footer) new ResizeObserver(setFabBottom).observe(footer);
      setFabBottom();

      // Optional: close when tapping outside actions
      document.addEventListener('click', (e) => {
        if (!dial.contains(e.target) && dial.getAttribute('aria-expanded') === 'true') {
          dial.setAttribute('aria-expanded', 'false');
          plus.classList.remove('hidden');
          close.classList.add('hidden');
        }
      }, true);
    })();

    // å¥—é¤ç±»å‹åˆ‡æ¢åŠŸèƒ½
    (function () {
      const packageTypeSelector = document.getElementById('packageTypeSelector');
      const packageTypeDisplay = document.getElementById('packageType');

      if (packageTypeSelector && packageTypeDisplay) {
        // ç›‘å¬é€‰æ‹©å™¨å˜åŒ–
        packageTypeSelector.addEventListener('change', function () {
          const newPackageType = this.value;
          packageTypeDisplay.textContent = newPackageType;

          console.log('ğŸ½ï¸ å¥—é¤ç±»å‹åˆ‡æ¢ä¸º:', newPackageType);

          // é‡æ–°åŠ è½½èœå•ä»¥åº”ç”¨æ–°çš„ä»·æ ¼
          if (window.order && typeof window.order.loadMenuFromFirebase === 'function') {
            console.log('ğŸ”„ é‡æ–°åŠ è½½èœå•ä»¥åº”ç”¨å¥—é¤ä»·æ ¼...');
            window.order.loadMenuFromFirebase();
          }
        });

        // åˆå§‹åŒ–æ˜¾ç¤º
        packageTypeDisplay.textContent = packageTypeSelector.value;
      }
    })();
  </script>

  <!-- æ‚¬æµ®æ§åˆ¶é¢æ¿æŒ‰é’® -->
  <button id="open-control-panel" class="floating-control-panel-btn" title="æ‰“å¼€æ§åˆ¶é¢æ¿">
    <i class="fas fa-cogs"></i>
    <span class="btn-text">Controlepaneel</span>
  </button>

  <!-- æ§åˆ¶é¢æ¿å¼¹çª— -->
  <div id="control-panel-overlay" class="control-panel-overlay">
    <div id="control-panel-modal" class="control-panel-modal">
      <div class="control-panel-header">
        <h3><i class="fas fa-cogs"></i> Tafelcontrole</h3>
        <button id="close-control-panel" class="close-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <!-- Quick Reset Button at Top -->
      <div class="quick-reset-container">
        <button id="quick-reset-button" class="quick-reset-btn" title="Tafel snel vrijmaken - Reset alle instellingen">
          <svg class="reset-icon" viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
          </svg>
          <span class="reset-text">Snel Reset Tafel</span>
        </button>
      </div>
      
      <div class="control-panel-content">
        <!-- å½“å‰æ¡Œå°ä¿¡æ¯ -->
        <div class="control-section">
          <h4><i class="fas fa-info-circle"></i> Huidige tafelgegevens</h4>
          <div class="control-info">
            <span id="current-table-info">Tafel - 1</span>
          </div>
        </div>
        
        <!-- äººæ•°è°ƒæ•´ -->
        <div class="control-section">
          <h4><i class="fas fa-users"></i> Aantal personen aanpassen</h4>
          <div class="control-group">
            <label for="person-count">Huidige aantal personen:</label>
            <div class="number-input-group">
              <button id="decrease-persons" class="number-btn">-</button>
              <input type="number" id="person-count" min="1" max="20" value="1">
              <button id="increase-persons" class="number-btn">+</button>
            </div>
            <button id="update-persons" class="action-btn update-btn">
              <i class="fas fa-save"></i> Aantal personen bijwerken
            </button>
          </div>
        </div>
        
        <!-- å¥—é¤æ§åˆ¶ -->
        <div class="control-section">
          <h4><i class="fas fa-utensils"></i> Menu beheer</h4>
          <div class="control-group">
            <label for="menu-count">Aantal menu's:</label>
            <div class="number-input-group">
              <button id="decrease-menu" class="number-btn">-</button>
              <input type="number" id="menu-count" min="0" max="10" value="0">
              <button id="increase-menu" class="number-btn">+</button>
            </div>
            <button id="update-menu-count" class="action-btn update-btn">
              <i class="fas fa-save"></i> Aantal menu's bijwerken
            </button>
          </div>
          
          <div class="control-group">
            <label>All-in menu status:</label>
            <div class="cp-toggle-wrapper">
              <label class="cp-toggle-switch">
                <input type="checkbox" id="all-in-toggle" class="cp-toggle-input">
                <span class="cp-toggle-slider"></span>
              </label>
              <span id="all-in-status" class="cp-status-text">Uit</span>
            </div>
          </div>
          
          <div class="control-group">
            <label>Menu type:</label>
            <div class="cp-toggle-wrapper">
              <label class="cp-toggle-switch">
                <input type="checkbox" id="menu-type-toggle" class="cp-toggle-input">
                <span class="cp-toggle-slider"></span>
              </label>
              <span id="menu-type-status" class="cp-status-text">Dinner</span>
            </div>
          </div>
        </div>
        
        <!-- è®¢å•ç®¡ç† -->
        <div class="control-section">
          <h4><i class="fas fa-list"></i> Bestelbeheer</h4>
          <div class="control-group">
            <button id="clear-order-history" class="action-btn danger-btn">
              <i class="fas fa-history"></i> Bestelgeschiedenis wissen
            </button>
          </div>
        </div>
        
        <!-- é‡ç½®åŠŸèƒ½ -->
        <div class="control-section">
          <h4><i class="fas fa-undo"></i> Reset functies</h4>
          <div class="control-group">
            <button id="reset-order-number" class="action-btn warning-btn">
              <i class="fas fa-hashtag"></i> Bestelnummer resetten naar 1
            </button>
            <button id="reset-all-settings" class="action-btn danger-btn">
              <i class="fas fa-exclamation-triangle"></i> Alle instellingen resetten
            </button>
          </div>
        </div>
      </div>
      
      <div class="control-panel-footer">
        <button id="close-control-panel-footer" class="action-btn cancel-btn">
          <i class="fas fa-times"></i> Sluiten
        </button>
      </div>
    </div>
  </div>

</body>

</html>