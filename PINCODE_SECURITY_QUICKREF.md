# ğŸ”’ ä¸‰å±‚Pincodeå®‰å…¨é˜²æŠ¤ - å¿«é€Ÿå‚è€ƒ

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä¸‰å±‚å®‰å…¨é˜²æŠ¤                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”’ ç¬¬ä¸€å±‚ï¼šç¦ç”¨æ·»åŠ æŒ‰é’®
   â”œâ”€ è§¦å‘ï¼šPincodeå˜æ›´æ—¶ï¼ˆå®æ—¶ç›‘å¬ï¼‰
   â”œâ”€ æ•ˆæœï¼šç¦ç”¨.add-to-orderæŒ‰é’®
   â”œâ”€ æ•ˆæœï¼šç¦ç”¨#order-verzendæŒ‰é’®  
   â”œâ”€ æ•ˆæœï¼šæ˜¾ç¤ºçº¢è‰²è­¦å‘Šæ¨ªå¹…
   â””â”€ æ–‡ä»¶ï¼šclass-order-js.js, verificatie-realtimeListener-js.js

ğŸ”’ ç¬¬äºŒå±‚ï¼šè®¢å•ç¡®è®¤éªŒè¯
   â”œâ”€ è§¦å‘ï¼šç‚¹å‡»ç¡®è®¤å¼¹çª—çš„"ç¡®è®¤"æŒ‰é’®
   â”œâ”€ æ•ˆæœï¼šéªŒè¯Pincodeå’Œæ¡Œå­çŠ¶æ€
   â”œâ”€ æ•ˆæœï¼šå¤±è´¥æ—¶é˜»æ­¢è®¢å•å‘é€
   â””â”€ æ–‡ä»¶ï¼šjavascript.js (ç¬¬875-924è¡Œ)

ğŸ”’ ç¬¬ä¸‰å±‚ï¼šå‘é€å‰æœ€ç»ˆéªŒè¯
   â”œâ”€ è§¦å‘ï¼šè°ƒç”¨sendDirect()å‡½æ•°æ—¶
   â”œâ”€ æ•ˆæœï¼šæœ€åé˜²çº¿ï¼ŒéªŒè¯Pincode
   â”œâ”€ æ•ˆæœï¼šå¤±è´¥æ—¶è¿”å›é”™è¯¯ï¼Œä¸å‘é€åˆ°Webhook
   â””â”€ æ–‡ä»¶ï¼šsendingOrder.js (ç¬¬3-56è¡Œ)
```

## ä»£ç ä½ç½®

| é˜²æŠ¤å±‚ | æ–‡ä»¶ | è¡Œæ•° | åŠŸèƒ½ |
|-------|------|------|------|
| ç¬¬ä¸€å±‚ | `class-order-js.js` | 795-841 | Pincodeå˜æ›´ç›‘å¬ + ç¦ç”¨UI |
| ç¬¬ä¸€å±‚ | `verificatie-realtimeListener-js.js` | 68-113 | Pincodeå˜æ›´ç›‘å¬ + ç¦ç”¨UI |
| è¾…åŠ© | `javascript.js` | 8-68 | å…¨å±€ç¦ç”¨å‡½æ•° + è­¦å‘Šæ¨ªå¹… |
| ç¬¬äºŒå±‚ | `javascript.js` | 875-924 | ç¡®è®¤å¼¹çª—éªŒè¯ |
| ç¬¬ä¸‰å±‚ | `sendingOrder.js` | 3-56 | å‘é€å‰æœ€ç»ˆéªŒè¯ |

## å…³é”®å‡½æ•°

### 1. å…¨å±€ç¦ç”¨å‡½æ•°
```javascript
// ä½ç½®: javascript.js
window.disableOrderingDueToInvalidSession()
```
åŠŸèƒ½ï¼š
- ç¦ç”¨æ‰€æœ‰è®¢å•æŒ‰é’®
- æ˜¾ç¤ºé¡¶éƒ¨è­¦å‘Šæ¨ªå¹…
- æä¾›åˆ·æ–°é¡µé¢æŒ‰é’®

### 2. Pincodeå˜æ›´æ£€æµ‹
```javascript
// ä½ç½®: class-order-js.js, verificatie-realtimeListener-js.js
if (key === 'Pincode' && data) {
    const urlPincode = new URLSearchParams(window.location.search).get("pincode");
    if (String(urlPincode) !== String(data)) {
        // ä¼šè¯å¤±æ•ˆå¤„ç†
        window.AppConfig.sessionInvalid = true;
        window.disableOrderingDueToInvalidSession();
    }
}
```

### 3. è®¢å•ç¡®è®¤éªŒè¯
```javascript
// ä½ç½®: javascript.js
const tableRef = db.ref(`${rest}/tafel/${tafelId}`);
const snapshot = await tableRef.once('value');
const tableData = snapshot.val();

if (String(savedPin) !== String(tafelPin)) {
    showNotification(`âš ï¸ Pincode is niet meer geldig!`, "error", 5000);
    return;
}
```

### 4. å‘é€å‰éªŒè¯
```javascript
// ä½ç½®: sendingOrder.js
async function sendDirect(...) {
    // ğŸ”’ ç¬¬ä¸‰å±‚é˜²æŠ¤éªŒè¯
    const snapshot = await tableRef.once('value');
    if (String(savedPin) !== String(tafelPin)) {
        return "Fout: Pincode is niet geldig...";
    }
    // ç»§ç»­å‘é€...
}
```

## æµ‹è¯•å‘½ä»¤

### æµ‹è¯•1: è§¦å‘Pincodeå˜æ›´
```javascript
// åœ¨ç®¡ç†ç«¯ä¿®æ”¹Pincode
// è§‚å¯Ÿå®¢æˆ·ç«¯æ˜¯å¦æ˜¾ç¤ºè­¦å‘Šæ¨ªå¹…
```

### æµ‹è¯•2: å°è¯•æ·»åŠ èœå“
```javascript
// Pincodeå˜æ›´å
// ç‚¹å‡»"æ·»åŠ åˆ°è®¢å•"æŒ‰é’®
// é¢„æœŸï¼šæŒ‰é’®ä¸å“åº”ï¼ˆdisabledï¼‰
```

### æµ‹è¯•3: å°è¯•å‘é€è®¢å•
```javascript
// Pincodeå˜æ›´å
// ç‚¹å‡»"å‘é€è®¢å•"
// é¢„æœŸï¼šæŒ‰é’®ç¦ç”¨æˆ–éªŒè¯å¤±è´¥
```

### æµ‹è¯•4: ç»•è¿‡å‰ç«¯éªŒè¯
```javascript
// æ§åˆ¶å°æ‰§è¡Œ
document.getElementById('order-verzend').disabled = false;
document.getElementById('order-verzend').click();
// é¢„æœŸï¼šç¬¬äºŒå±‚æˆ–ç¬¬ä¸‰å±‚éªŒè¯æ‹¦æˆª
```

## æ—¥å¿—æ ‡è¯†

æŸ¥æ‰¾æ—¥å¿—æ—¶æœç´¢ä»¥ä¸‹å…³é”®å­—ï¼š

- `ğŸ” ç¬¬ä¸€å±‚é˜²æŠ¤` - ç¦ç”¨æŒ‰é’®æ—¶
- `ğŸ” ç¬¬äºŒå±‚é˜²æŠ¤` - ç¡®è®¤éªŒè¯æ—¶
- `ğŸ” ç¬¬ä¸‰å±‚é˜²æŠ¤` - å‘é€éªŒè¯æ—¶
- `ğŸ”’ Pincodeä¸åŒ¹é…` - æ£€æµ‹åˆ°å˜æ›´æ—¶
- `âœ… PincodeéªŒè¯é€šè¿‡` - éªŒè¯æˆåŠŸæ—¶
- `âŒ ç¬¬Xå±‚é˜²æŠ¤` - éªŒè¯å¤±è´¥æ—¶

## éƒ¨ç½²æ¸…å•

- [x] ä¿®æ”¹ `javascript.js`
- [x] ä¿®æ”¹ `class-order-js.js`
- [x] ä¿®æ”¹ `verificatie-realtimeListener-js.js`
- [x] ä¿®æ”¹ `sendingOrder.js`
- [ ] æµ‹è¯•ä¸‰å±‚é˜²æŠ¤
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] ç›‘æ§æ—¥å¿—

## å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆéœ€è¦ä¸‰å±‚é˜²æŠ¤ï¼Ÿ**
A: å¤šå±‚é˜²å¾¡ç¡®ä¿å³ä½¿æŸå±‚è¢«ç»•è¿‡ï¼Œä»æœ‰å…¶ä»–å±‚ä¿æŠ¤ã€‚

**Q: ä¼šå½±å“æ­£å¸¸ç”¨æˆ·å—ï¼Ÿ**
A: ä¸ä¼šã€‚æ­£å¸¸æƒ…å†µä¸‹ä¸‰å±‚éªŒè¯éƒ½æ˜¯é€æ˜çš„ã€‚

**Q: Pincodeå˜æ›´åç”¨æˆ·è¯¥æ€ä¹ˆåŠï¼Ÿ**
A: ç‚¹å‡»é¡¶éƒ¨æ¨ªå¹…çš„"åˆ·æ–°é¡µé¢"æŒ‰é’®ï¼Œä½¿ç”¨æ–°Pincodeé‡æ–°ç™»å½•ã€‚

**Q: å¦‚ä½•æŸ¥çœ‹éªŒè¯æ—¥å¿—ï¼Ÿ**
A: æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œæœç´¢"ğŸ”"æˆ–"ç¬¬Xå±‚é˜²æŠ¤"ã€‚

---

**æœ€åæ›´æ–°**: 2025-10-17
**ç‰ˆæœ¬**: v2.1.0
**çŠ¶æ€**: âœ… å·²å®æ–½
